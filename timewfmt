#!/usr/bin/env bash
#
# convert from a $HISTTIMEFORMAT to an iso8601 (less tz) time for taskw
# todo: should this have a newline? it's normally in a subshell with other
# args on the command line, not used standalone
#
: ${1:?}
case ${#1} in
(14) t=$1;;
(12) t=$(date +%Y); t=${t%??}$1;;
(10) t=$(date +%Y)$1;;
 (8) t=$(date +%Y%m)$1;;
 (6) t=$(date +%Y%m%d)$1;;
 (4) t=$(date +%Y%m%d%H)$1;;
 (*) echo "need to supply at least minute and second" >&2; false; exit;;
esac
printf ${t:0:4}-${t:4:2}-${t:6:2}T${t:8:2}:${t:10:2}:${t:12:2}
